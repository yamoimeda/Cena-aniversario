{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import _classCallCheck from\"C:/Users/LabJH/Documents/yamir/cit/minaposento/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/LabJH/Documents/yamir/cit/minaposento/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/LabJH/Documents/yamir/cit/minaposento/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/LabJH/Documents/yamir/cit/minaposento/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"react-step-progress-bar/styles.css\";import fire from'../../firebase';import{QRCode}from'react-qrcode-logo';import{withRouter}from\"react-router\";import lgmeeaa from\"./componentes/logo_aposento nuevo-01.png\";import{Button,TextField}from\"@material-ui/core\";import firebase from'firebase/app';export var verificar=/*#__PURE__*/function(_Component){_inherits(verificar,_Component);var _super=_createSuper(verificar);function verificar(){var _this;_classCallCheck(this,verificar);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={step:1,cedula:\"\",html:\"\",asistencia:null,cofee:null};_this.asistencia=function(uid){fire.firestore().collection(\"koinonia-registros\").doc(uid).update({asistencia:1}).then(function(){_this.setState({asistencia:1});});};_this.cofee=function(uid){fire.firestore().collection(\"koinonia-registros\").doc(uid).update({cofee:firebase.firestore.FieldValue.increment(-1)}).then(function(){_this.setState({cofee:_this.state.cofee-1});});};_this.buscar=function(uid){var newdata;fire.firestore().collection(\"koinonia-registros\").where(\"uid\",\"==\",uid).get().then(function(querySnapshot){querySnapshot.forEach(function(doc){newdata=doc.data();});_this.setState({cofee:newdata.cofee,asistencia:newdata.asistencia});var color=newdata.tipo==1?'blue':newdata.tipo==2?\"yellow\":\"#cc00ff\";var html=/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"textokoiform2\",children:[\"Este boleto: \",newdata.verificado==0?\"Aun no esta verificado\":\"Ya esta verificado\"]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\"},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"textokoiform4\",children:[\" \",newdata.pagado==0?\"Abonado\":newdata.pagado==1?\"Pagado\":\"Pendiente\"]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"textokoiform4\",children:[\"Nombre: \",newdata.nombre+\" \"+newdata.apellido]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"textokoiform4\",children:[\"C\\xE9dula: \",newdata.cedula]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"textokoiform4\",children:[\"Sede: \",newdata.igle]}),newdata.igle==\"Panamá\"&&/*#__PURE__*/_jsxs(\"h4\",{className:\"textokoiform4\",children:[\"Red: \",newdata.red]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"textokoiform4\",children:[\"Boleto: \",newdata.tipo==1?'Completo':\"Media jornada \"]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"textokoiform4\",children:[\"Cantidad de cofee: \",_this.state.cofee]})]})}),/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:color,height:\"100px\"}}),_this.state.cofee!=0&&/*#__PURE__*/_jsx(Button,{style:{background:\"#fa7b25\",color:\"#ffff\",width:\"20%\",margin:\"auto\",height:\"10%\",display:'block',marginTop:'20px'},label:\"Siguiente\",onClick:_this.cofee(newdata.uid),children:\"Cofee tomado\"}),_this.state.asistencia===0&&/*#__PURE__*/_jsxs(Button,{style:{background:\"#fa7b25\",color:\"#ffff\",width:\"40%\",height:\"20%\"},label:\"Continue\",onClick:_this.asistencia(newdata.uid),children:[\" \",\"Asistio\"]})]});if(newdata){_this.setState({html:html});}}).catch(function(error){_this.setState({html:/*#__PURE__*/_jsx(\"h4\",{className:\"textokoiform4\",children:\"Este boleto No esta registrado\"})});});};return _this;}_createClass(verificar,[{key:\"componentDidMount\",value:function componentDidMount(){var id=this.props.match.params.id;console.log(id);this.buscar(id);}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{className:\"datos\",children:this.state.html});}}]);return verificar;}(Component);export default withRouter(verificar);","map":{"version":3,"sources":["C:/Users/LabJH/Documents/yamir/cit/minaposento/src/components/Koinonia/verificarqr.js"],"names":["React","Component","fire","QRCode","withRouter","lgmeeaa","Button","TextField","firebase","verificar","state","step","cedula","html","asistencia","cofee","uid","firestore","collection","doc","update","then","setState","FieldValue","increment","buscar","newdata","where","get","querySnapshot","forEach","data","color","tipo","verificado","display","justifyContent","pagado","nombre","apellido","igle","red","backgroundColor","height","background","width","margin","marginTop","catch","error","id","props","match","params","console","log"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"react-step-progress-bar/styles.css\";\r\nimport fire from '../../firebase';\r\nimport { QRCode } from 'react-qrcode-logo';\r\nimport { withRouter } from \"react-router\";\r\nimport lgmeeaa from \"./componentes/logo_aposento nuevo-01.png\"\r\nimport {\r\n    Button,\r\n    TextField,\r\n  } from \"@material-ui/core\";\r\nimport firebase  from 'firebase/app'\r\n\r\nexport class verificar extends Component {\r\n    \r\n  state = {\r\n    step: 1,\r\n    cedula: \"\",\r\n    html:\"\",\r\n    asistencia:null,\r\n    cofee:null\r\n  };\r\n  // Go to next step\r\n  asistencia = uid =>{\r\n\r\n    fire.firestore().collection(\"koinonia-registros\").doc(uid).update({\r\n      asistencia: 1\r\n  })\r\n  .then(() => {\r\n    \r\n    this.setState({asistencia:1})\r\n  })\r\n  \r\n  }\r\n\r\n  cofee = uid =>{\r\n\r\n    fire.firestore().collection(\"koinonia-registros\").doc(uid).update({\r\n      cofee: firebase.firestore.FieldValue.increment(-1)\r\n  })\r\n  .then(() => {\r\n    \r\n    this.setState({cofee:this.state.cofee-1})\r\n  })\r\n  \r\n  }\r\n\r\n  componentDidMount(){\r\n      \r\n    const id = this.props.match.params.id;\r\n    console.log(id);\r\n      this.buscar(id)\r\n  }\r\n  buscar = (uid) => {\r\n      var newdata;\r\n    fire.firestore().collection(\"koinonia-registros\").where(\"uid\",\"==\",uid)\r\n    .get()\r\n    .then((querySnapshot) => {\r\n     \r\n      querySnapshot.forEach((doc) => {\r\n       newdata = doc.data()\r\n      \r\n        });\r\n        this.setState({cofee:newdata.cofee,asistencia:newdata.asistencia})\r\n\r\n        var color = newdata.tipo == 1 ? 'blue' :newdata.tipo == 2 ?\"yellow\": \"#cc00ff\"\r\n      var html = <div>\r\n      <h4 className=\"textokoiform2\">Este boleto: {newdata.verificado == 0 ? \"Aun no esta verificado\":\"Ya esta verificado\"}</h4>\r\n      <div  style={{display:\"flex\",justifyContent:\"center\"}}>\r\n      \r\n        <div>\r\n        <h4 className=\"textokoiform4\"> {newdata.pagado == 0 ? \"Abonado\":newdata.pagado == 1 ?\"Pagado\":\"Pendiente\"}</h4>\r\n      <h4 className=\"textokoiform4\">Nombre: {newdata.nombre+\" \" +newdata.apellido}</h4>\r\n            <h4 className=\"textokoiform4\">Cédula: {newdata.cedula}</h4>\r\n            <h4 className=\"textokoiform4\">Sede: {newdata.igle}</h4>\r\n            {newdata.igle == \"Panamá\" && <h4 className=\"textokoiform4\">Red: {newdata.red}</h4> }\r\n            \r\n            <h4 className=\"textokoiform4\">Boleto: {newdata.tipo == 1 ? 'Completo' :\"Media jornada \"}</h4>\r\n            <h4 className=\"textokoiform4\">Cantidad de cofee: {this.state.cofee}</h4>\r\n        </div>\r\n        </div>\r\n\r\n        <div style={{backgroundColor:color,height:\"100px\"}}>\r\n\r\n        </div>\r\n\r\n        {this.state.cofee != 0 &&<Button\r\n          style={{ background: \"#fa7b25\", color: \"#ffff\",width: \"20%\",margin:\"auto\",height:\"10%\",display:'block',marginTop:'20px'}}\r\n          label=\"Siguiente\"\r\n          onClick={this.cofee(newdata.uid)}\r\n        >\r\n          Cofee tomado\r\n        </Button>}\r\n\r\n          {this.state.asistencia === 0 && <Button\r\n            style={{background: \"#fa7b25\", color: \"#ffff\",\r\n              width: \"40%\", height:\"20%\"\r\n            }}\r\n            label=\"Continue\"\r\n            onClick={this.asistencia(newdata.uid)}\r\n            \r\n          >\r\n            {\" \"}\r\n            Asistio\r\n          </Button>\r\n          }\r\n     </div>\r\n\r\n      if(newdata){\r\n        this.setState({html:html})\r\n      }\r\n    })\r\n    .catch((error) => {\r\n    this.setState({html: <h4 className=\"textokoiform4\">Este boleto No esta registrado</h4>})\r\n\r\n    });\r\n  \r\n    \r\n  };\r\n  \r\n  render() {\r\n\r\n\r\n   return(\r\n       <div className=\"datos\"  >\r\n       {this.state.html}\r\n\r\n\r\n        </div>\r\n  \r\n   )\r\n  }\r\n}\r\nexport default withRouter(verificar);\r\n\r\n"]},"metadata":{},"sourceType":"module"}