{"ast":null,"code":"/*!\n * Unipointer v2.3.0\n * base class for doing one thing with pointer event\n * MIT license\n */\n\n/*jshint browser: true, undef: true, unused: true, strict: true */\n(function (window, factory) {\n  // universal module definition\n\n  /* jshint strict: false */\n\n  /*global define, module, require */\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define(['ev-emitter/ev-emitter'], function (EvEmitter) {\n      return factory(window, EvEmitter);\n    });\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory(window, require('ev-emitter'));\n  } else {\n    // browser global\n    window.Unipointer = factory(window, window.EvEmitter);\n  }\n})(window, function factory(window, EvEmitter) {\n  'use strict';\n\n  function noop() {}\n\n  function Unipointer() {} // inherit EvEmitter\n\n\n  var proto = Unipointer.prototype = Object.create(EvEmitter.prototype);\n\n  proto.bindStartEvent = function (elem) {\n    this._bindStartEvent(elem, true);\n  };\n\n  proto.unbindStartEvent = function (elem) {\n    this._bindStartEvent(elem, false);\n  };\n  /**\n   * Add or remove start event\n   * @param {Boolean} isAdd - remove if falsey\n   */\n\n\n  proto._bindStartEvent = function (elem, isAdd) {\n    // munge isAdd, default to true\n    isAdd = isAdd === undefined ? true : isAdd;\n    var bindMethod = isAdd ? 'addEventListener' : 'removeEventListener'; // default to mouse events\n\n    var startEvent = 'mousedown';\n\n    if (window.PointerEvent) {\n      // Pointer Events\n      startEvent = 'pointerdown';\n    } else if ('ontouchstart' in window) {\n      // Touch Events. iOS Safari\n      startEvent = 'touchstart';\n    }\n\n    elem[bindMethod](startEvent, this);\n  }; // trigger handler methods for events\n\n\n  proto.handleEvent = function (event) {\n    var method = 'on' + event.type;\n\n    if (this[method]) {\n      this[method](event);\n    }\n  }; // returns the touch that we're keeping track of\n\n\n  proto.getTouch = function (touches) {\n    for (var i = 0; i < touches.length; i++) {\n      var touch = touches[i];\n\n      if (touch.identifier == this.pointerIdentifier) {\n        return touch;\n      }\n    }\n  }; // ----- start event ----- //\n\n\n  proto.onmousedown = function (event) {\n    // dismiss clicks from right or middle buttons\n    var button = event.button;\n\n    if (button && button !== 0 && button !== 1) {\n      return;\n    }\n\n    this._pointerDown(event, event);\n  };\n\n  proto.ontouchstart = function (event) {\n    this._pointerDown(event, event.changedTouches[0]);\n  };\n\n  proto.onpointerdown = function (event) {\n    this._pointerDown(event, event);\n  };\n  /**\n   * pointer start\n   * @param {Event} event\n   * @param {Event or Touch} pointer\n   */\n\n\n  proto._pointerDown = function (event, pointer) {\n    // dismiss right click and other pointers\n    // button = 0 is okay, 1-4 not\n    if (event.button || this.isPointerDown) {\n      return;\n    }\n\n    this.isPointerDown = true; // save pointer identifier to match up touch events\n\n    this.pointerIdentifier = pointer.pointerId !== undefined ? // pointerId for pointer events, touch.indentifier for touch events\n    pointer.pointerId : pointer.identifier;\n    this.pointerDown(event, pointer);\n  };\n\n  proto.pointerDown = function (event, pointer) {\n    this._bindPostStartEvents(event);\n\n    this.emitEvent('pointerDown', [event, pointer]);\n  }; // hash of events to be bound after start event\n\n\n  var postStartEvents = {\n    mousedown: ['mousemove', 'mouseup'],\n    touchstart: ['touchmove', 'touchend', 'touchcancel'],\n    pointerdown: ['pointermove', 'pointerup', 'pointercancel']\n  };\n\n  proto._bindPostStartEvents = function (event) {\n    if (!event) {\n      return;\n    } // get proper events to match start event\n\n\n    var events = postStartEvents[event.type]; // bind events to node\n\n    events.forEach(function (eventName) {\n      window.addEventListener(eventName, this);\n    }, this); // save these arguments\n\n    this._boundPointerEvents = events;\n  };\n\n  proto._unbindPostStartEvents = function () {\n    // check for _boundEvents, in case dragEnd triggered twice (old IE8 bug)\n    if (!this._boundPointerEvents) {\n      return;\n    }\n\n    this._boundPointerEvents.forEach(function (eventName) {\n      window.removeEventListener(eventName, this);\n    }, this);\n\n    delete this._boundPointerEvents;\n  }; // ----- move event ----- //\n\n\n  proto.onmousemove = function (event) {\n    this._pointerMove(event, event);\n  };\n\n  proto.onpointermove = function (event) {\n    if (event.pointerId == this.pointerIdentifier) {\n      this._pointerMove(event, event);\n    }\n  };\n\n  proto.ontouchmove = function (event) {\n    var touch = this.getTouch(event.changedTouches);\n\n    if (touch) {\n      this._pointerMove(event, touch);\n    }\n  };\n  /**\n   * pointer move\n   * @param {Event} event\n   * @param {Event or Touch} pointer\n   * @private\n   */\n\n\n  proto._pointerMove = function (event, pointer) {\n    this.pointerMove(event, pointer);\n  }; // public\n\n\n  proto.pointerMove = function (event, pointer) {\n    this.emitEvent('pointerMove', [event, pointer]);\n  }; // ----- end event ----- //\n\n\n  proto.onmouseup = function (event) {\n    this._pointerUp(event, event);\n  };\n\n  proto.onpointerup = function (event) {\n    if (event.pointerId == this.pointerIdentifier) {\n      this._pointerUp(event, event);\n    }\n  };\n\n  proto.ontouchend = function (event) {\n    var touch = this.getTouch(event.changedTouches);\n\n    if (touch) {\n      this._pointerUp(event, touch);\n    }\n  };\n  /**\n   * pointer up\n   * @param {Event} event\n   * @param {Event or Touch} pointer\n   * @private\n   */\n\n\n  proto._pointerUp = function (event, pointer) {\n    this._pointerDone();\n\n    this.pointerUp(event, pointer);\n  }; // public\n\n\n  proto.pointerUp = function (event, pointer) {\n    this.emitEvent('pointerUp', [event, pointer]);\n  }; // ----- pointer done ----- //\n  // triggered on pointer up & pointer cancel\n\n\n  proto._pointerDone = function () {\n    this._pointerReset();\n\n    this._unbindPostStartEvents();\n\n    this.pointerDone();\n  };\n\n  proto._pointerReset = function () {\n    // reset properties\n    this.isPointerDown = false;\n    delete this.pointerIdentifier;\n  };\n\n  proto.pointerDone = noop; // ----- pointer cancel ----- //\n\n  proto.onpointercancel = function (event) {\n    if (event.pointerId == this.pointerIdentifier) {\n      this._pointerCancel(event, event);\n    }\n  };\n\n  proto.ontouchcancel = function (event) {\n    var touch = this.getTouch(event.changedTouches);\n\n    if (touch) {\n      this._pointerCancel(event, touch);\n    }\n  };\n  /**\n   * pointer cancel\n   * @param {Event} event\n   * @param {Event or Touch} pointer\n   * @private\n   */\n\n\n  proto._pointerCancel = function (event, pointer) {\n    this._pointerDone();\n\n    this.pointerCancel(event, pointer);\n  }; // public\n\n\n  proto.pointerCancel = function (event, pointer) {\n    this.emitEvent('pointerCancel', [event, pointer]);\n  }; // -----  ----- //\n  // utility function for getting x/y coords from event\n\n\n  Unipointer.getPointerPoint = function (pointer) {\n    return {\n      x: pointer.pageX,\n      y: pointer.pageY\n    };\n  }; // -----  ----- //\n\n\n  return Unipointer;\n});","map":{"version":3,"sources":["C:/Users/LabJH/Documents/yamir/cit/minaposento/node_modules/unipointer/unipointer.js"],"names":["window","factory","define","amd","EvEmitter","module","exports","require","Unipointer","noop","proto","prototype","Object","create","bindStartEvent","elem","_bindStartEvent","unbindStartEvent","isAdd","undefined","bindMethod","startEvent","PointerEvent","handleEvent","event","method","type","getTouch","touches","i","length","touch","identifier","pointerIdentifier","onmousedown","button","_pointerDown","ontouchstart","changedTouches","onpointerdown","pointer","isPointerDown","pointerId","pointerDown","_bindPostStartEvents","emitEvent","postStartEvents","mousedown","touchstart","pointerdown","events","forEach","eventName","addEventListener","_boundPointerEvents","_unbindPostStartEvents","removeEventListener","onmousemove","_pointerMove","onpointermove","ontouchmove","pointerMove","onmouseup","_pointerUp","onpointerup","ontouchend","_pointerDone","pointerUp","_pointerReset","pointerDone","onpointercancel","_pointerCancel","ontouchcancel","pointerCancel","getPointerPoint","x","pageX","y","pageY"],"mappings":"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","sourcesContent":["/*!\n * Unipointer v2.3.0\n * base class for doing one thing with pointer event\n * MIT license\n */\n\n/*jshint browser: true, undef: true, unused: true, strict: true */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*global define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n      'ev-emitter/ev-emitter'\n    ], function( EvEmitter ) {\n      return factory( window, EvEmitter );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('ev-emitter')\n    );\n  } else {\n    // browser global\n    window.Unipointer = factory(\n      window,\n      window.EvEmitter\n    );\n  }\n\n}( window, function factory( window, EvEmitter ) {\n\n'use strict';\n\nfunction noop() {}\n\nfunction Unipointer() {}\n\n// inherit EvEmitter\nvar proto = Unipointer.prototype = Object.create( EvEmitter.prototype );\n\nproto.bindStartEvent = function( elem ) {\n  this._bindStartEvent( elem, true );\n};\n\nproto.unbindStartEvent = function( elem ) {\n  this._bindStartEvent( elem, false );\n};\n\n/**\n * Add or remove start event\n * @param {Boolean} isAdd - remove if falsey\n */\nproto._bindStartEvent = function( elem, isAdd ) {\n  // munge isAdd, default to true\n  isAdd = isAdd === undefined ? true : isAdd;\n  var bindMethod = isAdd ? 'addEventListener' : 'removeEventListener';\n\n  // default to mouse events\n  var startEvent = 'mousedown';\n  if ( window.PointerEvent ) {\n    // Pointer Events\n    startEvent = 'pointerdown';\n  } else if ( 'ontouchstart' in window ) {\n    // Touch Events. iOS Safari\n    startEvent = 'touchstart';\n  }\n  elem[ bindMethod ]( startEvent, this );\n};\n\n// trigger handler methods for events\nproto.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\n// returns the touch that we're keeping track of\nproto.getTouch = function( touches ) {\n  for ( var i=0; i < touches.length; i++ ) {\n    var touch = touches[i];\n    if ( touch.identifier == this.pointerIdentifier ) {\n      return touch;\n    }\n  }\n};\n\n// ----- start event ----- //\n\nproto.onmousedown = function( event ) {\n  // dismiss clicks from right or middle buttons\n  var button = event.button;\n  if ( button && ( button !== 0 && button !== 1 ) ) {\n    return;\n  }\n  this._pointerDown( event, event );\n};\n\nproto.ontouchstart = function( event ) {\n  this._pointerDown( event, event.changedTouches[0] );\n};\n\nproto.onpointerdown = function( event ) {\n  this._pointerDown( event, event );\n};\n\n/**\n * pointer start\n * @param {Event} event\n * @param {Event or Touch} pointer\n */\nproto._pointerDown = function( event, pointer ) {\n  // dismiss right click and other pointers\n  // button = 0 is okay, 1-4 not\n  if ( event.button || this.isPointerDown ) {\n    return;\n  }\n\n  this.isPointerDown = true;\n  // save pointer identifier to match up touch events\n  this.pointerIdentifier = pointer.pointerId !== undefined ?\n    // pointerId for pointer events, touch.indentifier for touch events\n    pointer.pointerId : pointer.identifier;\n\n  this.pointerDown( event, pointer );\n};\n\nproto.pointerDown = function( event, pointer ) {\n  this._bindPostStartEvents( event );\n  this.emitEvent( 'pointerDown', [ event, pointer ] );\n};\n\n// hash of events to be bound after start event\nvar postStartEvents = {\n  mousedown: [ 'mousemove', 'mouseup' ],\n  touchstart: [ 'touchmove', 'touchend', 'touchcancel' ],\n  pointerdown: [ 'pointermove', 'pointerup', 'pointercancel' ],\n};\n\nproto._bindPostStartEvents = function( event ) {\n  if ( !event ) {\n    return;\n  }\n  // get proper events to match start event\n  var events = postStartEvents[ event.type ];\n  // bind events to node\n  events.forEach( function( eventName ) {\n    window.addEventListener( eventName, this );\n  }, this );\n  // save these arguments\n  this._boundPointerEvents = events;\n};\n\nproto._unbindPostStartEvents = function() {\n  // check for _boundEvents, in case dragEnd triggered twice (old IE8 bug)\n  if ( !this._boundPointerEvents ) {\n    return;\n  }\n  this._boundPointerEvents.forEach( function( eventName ) {\n    window.removeEventListener( eventName, this );\n  }, this );\n\n  delete this._boundPointerEvents;\n};\n\n// ----- move event ----- //\n\nproto.onmousemove = function( event ) {\n  this._pointerMove( event, event );\n};\n\nproto.onpointermove = function( event ) {\n  if ( event.pointerId == this.pointerIdentifier ) {\n    this._pointerMove( event, event );\n  }\n};\n\nproto.ontouchmove = function( event ) {\n  var touch = this.getTouch( event.changedTouches );\n  if ( touch ) {\n    this._pointerMove( event, touch );\n  }\n};\n\n/**\n * pointer move\n * @param {Event} event\n * @param {Event or Touch} pointer\n * @private\n */\nproto._pointerMove = function( event, pointer ) {\n  this.pointerMove( event, pointer );\n};\n\n// public\nproto.pointerMove = function( event, pointer ) {\n  this.emitEvent( 'pointerMove', [ event, pointer ] );\n};\n\n// ----- end event ----- //\n\n\nproto.onmouseup = function( event ) {\n  this._pointerUp( event, event );\n};\n\nproto.onpointerup = function( event ) {\n  if ( event.pointerId == this.pointerIdentifier ) {\n    this._pointerUp( event, event );\n  }\n};\n\nproto.ontouchend = function( event ) {\n  var touch = this.getTouch( event.changedTouches );\n  if ( touch ) {\n    this._pointerUp( event, touch );\n  }\n};\n\n/**\n * pointer up\n * @param {Event} event\n * @param {Event or Touch} pointer\n * @private\n */\nproto._pointerUp = function( event, pointer ) {\n  this._pointerDone();\n  this.pointerUp( event, pointer );\n};\n\n// public\nproto.pointerUp = function( event, pointer ) {\n  this.emitEvent( 'pointerUp', [ event, pointer ] );\n};\n\n// ----- pointer done ----- //\n\n// triggered on pointer up & pointer cancel\nproto._pointerDone = function() {\n  this._pointerReset();\n  this._unbindPostStartEvents();\n  this.pointerDone();\n};\n\nproto._pointerReset = function() {\n  // reset properties\n  this.isPointerDown = false;\n  delete this.pointerIdentifier;\n};\n\nproto.pointerDone = noop;\n\n// ----- pointer cancel ----- //\n\nproto.onpointercancel = function( event ) {\n  if ( event.pointerId == this.pointerIdentifier ) {\n    this._pointerCancel( event, event );\n  }\n};\n\nproto.ontouchcancel = function( event ) {\n  var touch = this.getTouch( event.changedTouches );\n  if ( touch ) {\n    this._pointerCancel( event, touch );\n  }\n};\n\n/**\n * pointer cancel\n * @param {Event} event\n * @param {Event or Touch} pointer\n * @private\n */\nproto._pointerCancel = function( event, pointer ) {\n  this._pointerDone();\n  this.pointerCancel( event, pointer );\n};\n\n// public\nproto.pointerCancel = function( event, pointer ) {\n  this.emitEvent( 'pointerCancel', [ event, pointer ] );\n};\n\n// -----  ----- //\n\n// utility function for getting x/y coords from event\nUnipointer.getPointerPoint = function( pointer ) {\n  return {\n    x: pointer.pageX,\n    y: pointer.pageY\n  };\n};\n\n// -----  ----- //\n\nreturn Unipointer;\n\n}));\n"]},"metadata":{},"sourceType":"script"}