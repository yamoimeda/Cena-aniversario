{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import _regeneratorRuntime from\"C:/Users/LabJH/Documents/yamir/cit/minaposento/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/LabJH/Documents/yamir/cit/minaposento/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/LabJH/Documents/yamir/cit/minaposento/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/LabJH/Documents/yamir/cit/minaposento/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/LabJH/Documents/yamir/cit/minaposento/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/LabJH/Documents/yamir/cit/minaposento/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"react-step-progress-bar/styles.css\";import fire from'../../firebase';import{QRCode}from'react-qrcode-logo';import{withRouter}from\"react-router\";import lgmeeaa from\"./componentes/logo_aposento nuevo-01.png\";import{Button,TextField}from\"@material-ui/core\";import firebase from'firebase/app';export var verificar=/*#__PURE__*/function(_Component){_inherits(verificar,_Component);var _super=_createSuper(verificar);function verificar(){var _this;_classCallCheck(this,verificar);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={step:1,cedula:\"\",html:\"\",asistencia:0,cofee:0};_this.asistencia=function(uid){fire.firestore().collection(\"koinonia-registros\").doc(uid).update({asistencia:1}).then(function(){_this.setState({asistencia:1});alert(\"asistencia marcada\");window.location.reload();});};_this.cofee=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(uid){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:fire.firestore().collection(\"koinonia-registros\").doc(uid).update({cofee:firebase.firestore.FieldValue.increment(-1)}).then(function(){alert(\"Cofee marcado\");window.location.reload();});case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.buscar=function(uid){var newdata;fire.firestore().collection(\"koinonia-registros\").where(\"uid\",\"==\",uid).get().then(function(querySnapshot){querySnapshot.forEach(function(doc){newdata=doc.data();});_this.setState({cofee:newdata.cofee,asistencia:newdata.asistencia});var color=newdata.tipo===1?'#1d7499':newdata.tipo===2?\"#00ff15\":newdata.tipo===3?\"#0030a1\":\"#a6c1ff\";if(newdata.tipo===2){try{color=newdata.turno==='AM'?'#00ff15':'#f6ff00';}catch(_unused){color='#00ff15';}}var html=/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"textokoiform2\",children:[\"Este boleto: \",newdata.verificado==0?\"Aun no esta verificado\":\"Ya esta verificado\"]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\"},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"textokoiform4\",children:[\" \",newdata.pagado==0?\"Abonado\":newdata.pagado==1?\"Pagado\":\"Pendiente\"]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"textokoiform4\",children:[\"Nombre: \",newdata.nombre+\" \"+newdata.apellido]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"textokoiform4\",children:[\"C\\xE9dula: \",newdata.cedula]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"textokoiform4\",children:[\"Sede: \",newdata.igle]}),newdata.igle==\"Panamá\"&&/*#__PURE__*/_jsxs(\"h4\",{className:\"textokoiform4\",children:[\"Red: \",newdata.red]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"textokoiform4\",children:[\"Boleto: \",newdata.tipo===1?'Completo':newdata.tipo===2?\"Media jornada \":newdata.tipo===3?\"Niño\":\"Staff\"]}),newdata.tipo===2&&/*#__PURE__*/_jsxs(\"h4\",{className:\"textokoiform4\",children:[\"Turno: \",newdata.turno]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"textokoiform4\",children:[\"Cantidad de cofee: \",_this.state.cofee]})]})}),/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:color,height:\"100px\"}}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",height:\"40%\",width:\"100%\",justifyContent:'center'},children:[_this.state.cofee!=0&&/*#__PURE__*/_jsx(Button,{style:{background:\"#fa7b25\",color:\"#ffff\",width:\"20%\",marginRight:10,display:'block',marginTop:'20px'},label:\"Siguiente\",onClick:function onClick(){return _this.cofee(newdata.uid);},children:\"Cofee tomado\"}),_this.state.asistencia===0&&/*#__PURE__*/_jsx(Button,{style:{background:\"#11a600\",color:\"#ffff\",width:\"20%\",display:'block',marginTop:'20px'},label:\"Continue\",onClick:function onClick(){return _this.asistencia(newdata.uid);},children:\"Asisti\\xF3\"})]})]});if(newdata){_this.setState({html:html});}}).catch(function(error){_this.setState({html:/*#__PURE__*/_jsx(\"h4\",{className:\"textokoiform4\",children:\"Este boleto No esta registrado\"})});});};return _this;}_createClass(verificar,[{key:\"componentDidMount\",value:function componentDidMount(){var id=this.props.match.params.id;console.log(id);this.buscar(id);}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{className:\"datos\",children:this.state.html});}}]);return verificar;}(Component);export default withRouter(verificar);","map":{"version":3,"sources":["C:/Users/LabJH/Documents/yamir/cit/minaposento/src/components/Koinonia/verificarqr.js"],"names":["React","Component","fire","QRCode","withRouter","lgmeeaa","Button","TextField","firebase","verificar","state","step","cedula","html","asistencia","cofee","uid","firestore","collection","doc","update","then","setState","alert","window","location","reload","FieldValue","increment","buscar","newdata","where","get","querySnapshot","forEach","data","color","tipo","turno","verificado","display","justifyContent","pagado","nombre","apellido","igle","red","backgroundColor","height","width","background","marginRight","marginTop","catch","error","id","props","match","params","console","log"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"react-step-progress-bar/styles.css\";\r\nimport fire from '../../firebase';\r\nimport { QRCode } from 'react-qrcode-logo';\r\nimport { withRouter } from \"react-router\";\r\nimport lgmeeaa from \"./componentes/logo_aposento nuevo-01.png\"\r\nimport {\r\n    Button,\r\n    TextField,\r\n  } from \"@material-ui/core\";\r\nimport firebase  from 'firebase/app'\r\n\r\nexport class verificar extends Component {\r\n    \r\n  state = {\r\n    step: 1,\r\n    cedula: \"\",\r\n    html:\"\",\r\n    asistencia:0,\r\n    cofee:0\r\n  };\r\n  // Go to next step\r\n  asistencia = uid =>{\r\n    fire.firestore().collection(\"koinonia-registros\").doc(uid).update({\r\n      asistencia: 1\r\n    })\r\n    .then(() => {\r\n      this.setState({asistencia:1})\r\n      alert(\"asistencia marcada\")\r\n      window.location.reload();\r\n    })\r\n  }\r\n\r\n  cofee = async uid =>{\r\n    fire.firestore().collection(\"koinonia-registros\").doc(uid).update({\r\n      cofee: firebase.firestore.FieldValue.increment(-1)\r\n  }).then(() => {\r\n    \r\n    \r\n    alert(\"Cofee marcado\")\r\n    window.location.reload();\r\n  })\r\n  \r\n  }\r\n\r\n  componentDidMount(){\r\n      \r\n    const id = this.props.match.params.id;\r\n    console.log(id);\r\n      this.buscar(id)\r\n  }\r\n  buscar = (uid) => {\r\n      var newdata;\r\n    fire.firestore().collection(\"koinonia-registros\").where(\"uid\",\"==\",uid)\r\n    .get()\r\n    .then((querySnapshot) => {\r\n     \r\n      querySnapshot.forEach((doc) => {\r\n       newdata = doc.data()\r\n      \r\n        });\r\n        this.setState({cofee:newdata.cofee,asistencia:newdata.asistencia})\r\n\r\n        var color = newdata.tipo === 1 ? '#1d7499' :newdata.tipo === 2 ? \"#00ff15\": newdata.tipo === 3 ? \"#0030a1\" : \"#a6c1ff\"\r\n        if(newdata.tipo === 2 ){\r\n          try {\r\n            color = newdata.turno === 'AM' ? '#00ff15' : '#f6ff00'\r\n          }\r\n            \r\n          catch{\r\n            color = '#00ff15'\r\n          }\r\n            \r\n        }\r\n      var html = <div>\r\n      <h4 className=\"textokoiform2\">Este boleto: {newdata.verificado == 0 ? \"Aun no esta verificado\":\"Ya esta verificado\"}</h4>\r\n      <div  style={{display:\"flex\",justifyContent:\"center\"}}>\r\n      \r\n        <div>\r\n        <h4 className=\"textokoiform4\"> {newdata.pagado == 0 ? \"Abonado\":newdata.pagado == 1 ?\"Pagado\":\"Pendiente\"}</h4>\r\n      <h4 className=\"textokoiform4\">Nombre: {newdata.nombre+\" \" +newdata.apellido}</h4>\r\n            <h4 className=\"textokoiform4\">Cédula: {newdata.cedula}</h4>\r\n            <h4 className=\"textokoiform4\">Sede: {newdata.igle}</h4>\r\n            {newdata.igle == \"Panamá\" && <h4 className=\"textokoiform4\">Red: {newdata.red}</h4> }\r\n            \r\n            <h4 className=\"textokoiform4\">Boleto: {newdata.tipo === 1 ? 'Completo' : newdata.tipo === 2 ? \"Media jornada \" : newdata.tipo === 3 ? \"Niño\": \"Staff\"}</h4>\r\n            {newdata.tipo === 2 && <h4 className=\"textokoiform4\">Turno: {newdata.turno}</h4> }\r\n            <h4 className=\"textokoiform4\">Cantidad de cofee: {this.state.cofee}</h4>\r\n        </div>\r\n        </div>\r\n\r\n        <div style={{backgroundColor:color,height:\"100px\"}}>\r\n\r\n        </div>\r\n        <div style={{display:\"flex\",height:\"40%\",width:\"100%\", justifyContent:'center'}}>\r\n        {this.state.cofee != 0 &&<Button\r\n          style={{ background: \"#fa7b25\", color: \"#ffff\",width: \"20%\",marginRight:10, display:'block',marginTop:'20px'}}\r\n          label=\"Siguiente\"\r\n          onClick={() => this.cofee(newdata.uid)}\r\n        >\r\n          Cofee tomado\r\n        </Button>}\r\n\r\n          {this.state.asistencia === 0 && <Button\r\n             style={{ background: \"#11a600\", color: \"#ffff\",width: \"20%\", display:'block',marginTop:'20px'}}\r\n            label=\"Continue\"\r\n            onClick={() => this.asistencia(newdata.uid)}\r\n            \r\n          >\r\n            Asistió\r\n          </Button>\r\n          }\r\n        </div>\r\n        \r\n     </div>\r\n\r\n      if(newdata){\r\n        this.setState({html:html})\r\n      }\r\n    })\r\n    .catch((error) => {\r\n    this.setState({html: <h4 className=\"textokoiform4\">Este boleto No esta registrado</h4>})\r\n\r\n    });\r\n  \r\n    \r\n  };\r\n  \r\n  render() {\r\n\r\n\r\n   return(\r\n       <div className=\"datos\"  >\r\n       {this.state.html}\r\n\r\n\r\n        </div>\r\n  \r\n   )\r\n  }\r\n}\r\nexport default withRouter(verificar);\r\n\r\n"]},"metadata":{},"sourceType":"module"}