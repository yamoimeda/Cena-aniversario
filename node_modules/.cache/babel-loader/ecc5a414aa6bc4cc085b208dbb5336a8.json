{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import _defineProperty from\"C:/Users/LabJH/Documents/yamir/cit/minaposento/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:/Users/LabJH/Documents/yamir/cit/minaposento/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/LabJH/Documents/yamir/cit/minaposento/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/LabJH/Documents/yamir/cit/minaposento/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/LabJH/Documents/yamir/cit/minaposento/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{useEffect,useState,useContext}from\"react\";import{withStyles,makeStyles}from'@material-ui/core/styles';import{ImageGroup,Image}from'react-fullscreen-image';import{Button,TextField,Modal}from\"@material-ui/core\";import Table from'@material-ui/core/Table';import TableBody from'@material-ui/core/TableBody';import TableCell from'@material-ui/core/TableCell';import TableContainer from'@material-ui/core/TableContainer';import TableHead from'@material-ui/core/TableHead';import TableRow from'@material-ui/core/TableRow';import Dialog from'@material-ui/core/Dialog';import MuiDialogTitle from'@material-ui/core/DialogTitle';import MuiDialogContent from'@material-ui/core/DialogContent';import MuiDialogActions from'@material-ui/core/DialogActions';import Paper from'@material-ui/core/Paper';import firebase from'../../firebase';import Badge from'@material-ui/core/Badge';var StyledTableCell=withStyles(function(theme){return{head:{backgroundColor:'#15035f',color:'white',textAlign:\"center\"},body:{fontSize:14,textAlign:\"center\"}};})(TableCell);var StyledTableRow=withStyles(function(theme){return{root:{'&:nth-of-type(odd)':{backgroundColor:theme.palette.action.hover}}};})(TableRow);function createData(nombre,cedula,igle,red,monto,tipo,url,uid,verificado,pagosurls){return{nombre:nombre,cedula:cedula,igle:igle,red:red,monto:monto,tipo:tipo,url:url,uid:uid,verificado:verificado,pagosurls:pagosurls};}var styles=function styles(theme){return{root:{margin:0,padding:theme.spacing(2)},closeButton:{position:'absolute',right:theme.spacing(1),top:theme.spacing(1),color:theme.palette.grey[500]}};};var DialogContent=withStyles(function(theme){return{root:{padding:theme.spacing(2)}};})(MuiDialogContent);var DialogActions=withStyles(function(theme){return{root:{margin:0,padding:theme.spacing(1)}};})(MuiDialogActions);export var Preferences=/*#__PURE__*/function(_React$Component){_inherits(Preferences,_React$Component);var _super=_createSuper(Preferences);function Preferences(props){var _this;_classCallCheck(this,Preferences);_this=_super.call(this,props);_this.handleChange=function(input){return function(e){_this.setState(_defineProperty({},input,e.target.value));};};_this.verificar=function(uid){firebase.firestore().collection(\"koinonia-registros\").doc(uid).update({verificado:1}).then(function(){var newdata=_this.state.rows;var index=newdata.findIndex(function(obj){return obj.uid==uid;});newdata[index].verificado=1;_this.setState({rows:newdata});alert(\"boleto verificado\");});};_this.actualizar=function(uid){if(_this.state.monto==\"\"&&_this.state.red==\"\"){console.log(\"valor igual\");}else{if(_this.state.monto==\"\"&&_this.state.red!=\"\"){firebase.firestore().collection(\"koinonia-registros\").doc(uid).update({red:_this.state.red}).then(function(){var newdata=_this.state.rows;var index=newdata.findIndex(function(obj){return obj.uid==uid;});newdata[index].red=_this.state.red;_this.setState({rows:newdata});alert(\"actualizado\");});}if(_this.state.monto!=\"\"&&_this.state.red==\"\"){firebase.firestore().collection(\"koinonia-registros\").doc(uid).update({monto:_this.state.monto}).then(function(){var newdata=_this.state.rows;var index=newdata.findIndex(function(obj){return obj.uid==uid;});newdata[index].monto=_this.state.monto;_this.setState({rows:newdata});alert(\"actualizado\");});}if(_this.state.monto!=\"\"&&_this.state.red!=\"\"){firebase.firestore().collection(\"koinonia-registros\").doc(uid).update({monto:_this.state.monto,red:_this.state.red}).then(function(){var newdata=_this.state.rows;var index=newdata.findIndex(function(obj){return obj.uid==uid;});newdata[index].monto=_this.state.monto;newdata[index].red=_this.state.red;_this.setState({rows:newdata});alert(\"actualizado\");});}}};_this.handleClose=function(){_this.setState({open:false});};_this.handleOpen=function(url){_this.setState({open:true,url:url});};_this.state={rows:[],open:false,url:\"\",monto:\"\",red:\"\",total:0,registrados:0};return _this;}_createClass(Preferences,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;firebase.firestore().collection(\"koinonia-registros\").orderBy(\"verificado\").get().then(function(querySnapshot){var newdata=_this2.state.rows;var total=0;var registrados=0;querySnapshot.forEach(function(doc){var d=doc.data();newdata.push(createData(d.nombre+\" \"+d.apellido,d.cedula,d.igle,d.red,d.monto,d.tipo,d.url,d.uid,d.verificado,d.pagosurls));total=total+parseFloat(d.monto);registrados=registrados+1;});_this2.setState({rows:newdata,total:total,registrados:registrados});});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"textokoiform2\",children:[\"Registrados: \",this.state.registrados,\",  Suma de montos: \",this.state.total,\" \"]}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsx(ImageGroup,{children:/*#__PURE__*/_jsxs(Table,{\"aria-label\":\"customized table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(StyledTableCell,{align:\"left\",children:\"Nombre\"}),/*#__PURE__*/_jsx(StyledTableCell,{align:\"left\",children:\"Cedula\"}),/*#__PURE__*/_jsx(StyledTableCell,{align:\"left\",children:\"Iglesia\"}),/*#__PURE__*/_jsx(StyledTableCell,{align:\"left\",children:\"Red\"}),/*#__PURE__*/_jsx(StyledTableCell,{align:\"left\",children:\"Monto\"}),/*#__PURE__*/_jsx(StyledTableCell,{align:\"left\",children:\"Boleto\"}),/*#__PURE__*/_jsx(StyledTableCell,{align:\"left\",children:\"Estado\"}),/*#__PURE__*/_jsx(StyledTableCell,{align:\"right\",children:\"...\"}),/*#__PURE__*/_jsx(StyledTableCell,{align:\"right\",children:\"Comprobante\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:this.state.rows.map(function(row){return/*#__PURE__*/_jsxs(StyledTableRow,{children:[/*#__PURE__*/_jsx(StyledTableCell,{align:\"left\",children:row.nombre}),/*#__PURE__*/_jsx(StyledTableCell,{align:\"left\",children:row.cedula}),/*#__PURE__*/_jsx(StyledTableCell,{align:\"left\",children:row.igle}),/*#__PURE__*/_jsx(StyledTableCell,{align:\"left\",children:/*#__PURE__*/_jsx(TextField,{onChange:_this3.handleChange(\"red\"),defaultValue:row.red,variant:\"outlined\",margin:\"normal\",InputLabelProps:{shrink:true},style:{width:\"100%\"}})}),/*#__PURE__*/_jsx(StyledTableCell,{align:\"left\",children:/*#__PURE__*/_jsx(TextField,{onChange:_this3.handleChange(\"monto\"),defaultValue:row.monto,variant:\"outlined\",margin:\"normal\",InputLabelProps:{shrink:true},style:{width:\"45%\"}})}),/*#__PURE__*/_jsx(StyledTableCell,{align:\"left\",children:row.tipo==1?'Completo':\"Media jornada \"}),/*#__PURE__*/_jsx(StyledTableCell,{align:\"left\",children:row.verificado==1?/*#__PURE__*/_jsx(Badge,{color:\"primary\",badgeContent:\"verificado\"}):/*#__PURE__*/_jsx(Badge,{color:\"secondary\",badgeContent:\"pendiente\"})}),/*#__PURE__*/_jsxs(StyledTableCell,{align:\"right\",children:[/*#__PURE__*/_jsx(Button,{style:{background:\"blue\",color:\"#ffff\",width:\"40%\",marginRight:5,height:\"20%\",fontSize:10},label:\"verificar\",onClick:function onClick(){return _this3.verificar(row.uid);},children:\"Verificar\"}),/*#__PURE__*/_jsx(Button,{style:{background:\"#fa7b25\",color:\"#ffff\",width:\"40%\",margin:\"auto\",height:\"20%\",fontSize:10},label:\"actualizar\",onClick:function onClick(){return _this3.actualizar(row.uid);},children:\"Actualizar\"})]}),/*#__PURE__*/_jsx(StyledTableCell,{align:\"right\",children:/*#__PURE__*/_jsx(\"div\",{id:row.uid,className:\"foto\",onClick:function onClick(){return _this3.handleOpen(row.url);},children:/*#__PURE__*/_jsx(\"img\",{src:row.url,alt:row.url})})})]},row.uid);})})]})})}),/*#__PURE__*/_jsxs(Dialog,{onClose:this.handleClose,\"aria-labelledby\":\"customized-dialog-title\",open:this.state.open,children:[/*#__PURE__*/_jsx(DialogContent,{dividers:true,children:/*#__PURE__*/_jsx(\"div\",{className:\"fotomodal\",children:/*#__PURE__*/_jsx(\"img\",{style:{height:500},src:this.state.url,alt:this.state.url})})}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{autoFocus:true,onClick:this.handleClose,color:\"primary\",children:\"Cerrar\"})})]})]});}}]);return Preferences;}(React.Component);export default Preferences;","map":{"version":3,"sources":["C:/Users/LabJH/Documents/yamir/cit/minaposento/src/components/Preferences/Preferences.js"],"names":["React","useEffect","useState","useContext","withStyles","makeStyles","ImageGroup","Image","Button","TextField","Modal","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Dialog","MuiDialogTitle","MuiDialogContent","MuiDialogActions","Paper","firebase","Badge","StyledTableCell","theme","head","backgroundColor","color","textAlign","body","fontSize","StyledTableRow","root","palette","action","hover","createData","nombre","cedula","igle","red","monto","tipo","url","uid","verificado","pagosurls","styles","margin","padding","spacing","closeButton","position","right","top","grey","DialogContent","DialogActions","Preferences","props","handleChange","input","e","setState","target","value","verificar","firestore","collection","doc","update","then","newdata","state","rows","index","findIndex","obj","alert","actualizar","console","log","handleClose","open","handleOpen","total","registrados","orderBy","get","querySnapshot","forEach","d","data","push","apellido","parseFloat","map","row","shrink","width","background","marginRight","height","Component"],"mappings":"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","sourcesContent":["import React, { useEffect, useState ,useContext} from \"react\";\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\r\nimport { ImageGroup, Image } from 'react-fullscreen-image'\r\nimport {\r\n  Button,\r\n  TextField,\r\n  Modal\r\n\r\n} from \"@material-ui/core\";\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\r\nimport MuiDialogContent from '@material-ui/core/DialogContent';\r\nimport MuiDialogActions from '@material-ui/core/DialogActions';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport firebase from '../../firebase';\r\nimport Badge from '@material-ui/core/Badge';\r\n\r\nconst StyledTableCell = withStyles((theme) => ({\r\n  head: {\r\n    backgroundColor: '#15035f',\r\n    color: 'white',\r\n    textAlign:\"center\"\r\n  },\r\n  body: {\r\n    fontSize: 14,\r\n    textAlign:\"center\"\r\n    \r\n  },\r\n}))(TableCell);\r\n\r\nconst StyledTableRow = withStyles((theme) => ({\r\n  root: {\r\n    '&:nth-of-type(odd)': {\r\n      backgroundColor: theme.palette.action.hover,\r\n    },\r\n  },\r\n}))(TableRow);\r\n\r\nfunction createData(nombre, cedula, igle, red, monto,tipo,url,uid,verificado,pagosurls) {\r\n  return { nombre, cedula, igle, red, monto,tipo,url,uid,verificado,pagosurls };\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    margin: 0,\r\n    padding: theme.spacing(2),\r\n  },\r\n  closeButton: {\r\n    position: 'absolute',\r\n    right: theme.spacing(1),\r\n    top: theme.spacing(1),\r\n    color: theme.palette.grey[500],\r\n  },\r\n});\r\n\r\n\r\n\r\nconst DialogContent = withStyles((theme) => ({\r\n  root: {\r\n    padding: theme.spacing(2),\r\n  },\r\n}))(MuiDialogContent);\r\n\r\nconst DialogActions = withStyles((theme) => ({\r\n  root: {\r\n    margin: 0,\r\n    padding: theme.spacing(1),\r\n  },\r\n}))(MuiDialogActions);\r\n\r\n\r\nexport class Preferences extends React.Component {\r\n  constructor(props) {\r\n    super(props);    \r\n    this.state = {\r\n      rows : [],\r\n      open:false,\r\n      url:\"\",\r\n      monto:\"\",\r\n      red:\"\",\r\n      total:0,\r\n      registrados:0\r\n    };\r\n  }\r\n  \r\n  \r\n componentDidMount(){\r\n  firebase.firestore().collection(\"koinonia-registros\").orderBy(\"verificado\")\r\n  .get()\r\n  .then((querySnapshot) => {\r\n   let newdata = this.state.rows\r\n   let total = 0\r\n   let registrados = 0\r\n   \r\n    querySnapshot.forEach((doc) => {\r\n      var d = doc.data()\r\n     newdata.push(createData(d.nombre +\" \"+d.apellido, d.cedula, d.igle, d.red, d.monto,d.tipo,d.url,d.uid,d.verificado,d.pagosurls))\r\n     total = total + parseFloat(d.monto)\r\n     registrados = registrados+1\r\n      });\r\n      \r\n      this.setState({rows:newdata,total:total,registrados:registrados})\r\n    })\r\n\r\n }\r\n\r\n \r\n    handleChange = input => e =>{\r\n     \r\n        this.setState({ [input]: e.target.value });\r\n     \r\n    }\r\n\r\n  \r\n\r\nverificar = uid =>{\r\n\r\n  firebase.firestore().collection(\"koinonia-registros\").doc(uid).update({\r\n    verificado: 1\r\n})\r\n.then(() => {\r\n  var newdata = this.state.rows\r\n  var index = newdata.findIndex((obj => obj.uid == uid));\r\n\r\n  newdata[index].verificado = 1\r\n  this.setState({rows:newdata})\r\n  alert(\"boleto verificado\")\r\n})\r\n\r\n}\r\n\r\nactualizar = uid =>{\r\n  \r\n  if(this.state.monto == \"\" && this.state.red==\"\"  ){\r\n    console.log(\"valor igual\")\r\n  }else{\r\n    if(this.state.monto == \"\" && this.state.red != \"\"  ){\r\n      \r\n    firebase.firestore().collection(\"koinonia-registros\").doc(uid).update({\r\n      red:this.state.red\r\n  })\r\n  .then(() => {\r\n    var newdata = this.state.rows\r\n    var index = newdata.findIndex((obj => obj.uid == uid));\r\n  \r\n    newdata[index].red = this.state.red\r\n    this.setState({rows:newdata})\r\n    alert(\"actualizado\")\r\n  })\r\n\r\n    }\r\n\r\n    if(this.state.monto != \"\" && this.state.red==\"\"  ){\r\n\r\n\r\n      firebase.firestore().collection(\"koinonia-registros\").doc(uid).update({\r\n        monto: this.state.monto\r\n    })\r\n    .then(() => {\r\n      var newdata = this.state.rows\r\n      var index = newdata.findIndex((obj => obj.uid == uid));\r\n    \r\n      newdata[index].monto = this.state.monto\r\n      this.setState({rows:newdata})\r\n      alert(\"actualizado\")\r\n    })\r\n      \r\n    }\r\n\r\n    if(this.state.monto != \"\" && this.state.red!=\"\"  ){\r\n\r\n      \r\n    firebase.firestore().collection(\"koinonia-registros\").doc(uid).update({\r\n      monto: this.state.monto,\r\n      red:this.state.red\r\n  })\r\n  .then(() => {\r\n    var newdata = this.state.rows\r\n    var index = newdata.findIndex((obj => obj.uid == uid));\r\n  \r\n    newdata[index].monto = this.state.monto\r\n    newdata[index].red = this.state.red\r\n    this.setState({rows:newdata})\r\n    alert(\"actualizado\")\r\n  })\r\n    }\r\n\r\n  }\r\n  \r\n\r\n}\r\n\r\nhandleClose=()=>{\r\n  this.setState({open:false})\r\n}\r\n\r\nhandleOpen=(url)=>{\r\n \r\n  this.setState({open:true,url:url})\r\n}\r\n  render() {\r\n\r\n\r\n   return(\r\n     <div>\r\n       <h4 className=\"textokoiform2\">Registrados: {this.state.registrados},  Suma de montos: {this.state.total} </h4>\r\n    <TableContainer component={Paper}>\r\n      <ImageGroup>\r\n      <Table aria-label=\"customized table\" >\r\n        <TableHead>\r\n          <TableRow>\r\n            <StyledTableCell align=\"left\">Nombre</StyledTableCell>\r\n            <StyledTableCell align=\"left\">Cedula</StyledTableCell>\r\n            <StyledTableCell align=\"left\">Iglesia</StyledTableCell>\r\n            <StyledTableCell align=\"left\">Red</StyledTableCell>\r\n            <StyledTableCell align=\"left\">Monto</StyledTableCell>\r\n            <StyledTableCell align=\"left\">Boleto</StyledTableCell>\r\n            <StyledTableCell align=\"left\">Estado</StyledTableCell>\r\n            <StyledTableCell align=\"right\">...</StyledTableCell>\r\n            <StyledTableCell align=\"right\">Comprobante</StyledTableCell>\r\n          </TableRow>\r\n          \r\n        </TableHead>\r\n        <TableBody>\r\n          {this.state.rows.map((row) => (\r\n            <StyledTableRow key={row.uid}>\r\n              <StyledTableCell align=\"left\">{row.nombre}</StyledTableCell>\r\n              <StyledTableCell align=\"left\">{row.cedula}</StyledTableCell>\r\n              <StyledTableCell align=\"left\">{row.igle}</StyledTableCell>\r\n              <StyledTableCell align=\"left\">\r\n              <TextField\r\n                        onChange={this.handleChange(\"red\")}\r\n                        defaultValue={row.red}\r\n                        variant=\"outlined\" \r\n                        margin=\"normal\"\r\n                        InputLabelProps={{\r\n                          shrink: true,\r\n                        }}\r\n                        style={{width: \"100%\"}}\r\n                      />\r\n                </StyledTableCell>\r\n              <StyledTableCell align=\"left\">\r\n                    <TextField\r\n                        onChange={this.handleChange(\"monto\")}\r\n                        defaultValue={row.monto}\r\n                        variant=\"outlined\" \r\n                        margin=\"normal\"\r\n                        InputLabelProps={{\r\n                          shrink: true,\r\n                        }}\r\n                        style={{width: \"45%\"}}\r\n                      />\r\n                \r\n                </StyledTableCell>\r\n              <StyledTableCell align=\"left\">{row.tipo == 1 ? 'Completo' :\"Media jornada \"}</StyledTableCell>\r\n              <StyledTableCell align=\"left\">{row.verificado == 1 ? <Badge color=\"primary\" badgeContent={\"verificado\"}/> :<Badge color=\"secondary\" badgeContent={\"pendiente\"}/>}</StyledTableCell>\r\n              <StyledTableCell align=\"right\">\r\n\r\n                      <Button\r\n                style={{ background: \"blue\", color: \"#ffff\",width: \"40%\",marginRight:5,height:\"20%\",fontSize:10}}\r\n                label=\"verificar\"\r\n                onClick={()=>this.verificar(row.uid)}\r\n              >\r\n                Verificar\r\n              </Button>\r\n              <Button\r\n                style={{ background: \"#fa7b25\", color: \"#ffff\",width: \"40%\",margin:\"auto\",height:\"20%\",fontSize:10}}\r\n                label=\"actualizar\"\r\n                onClick={()=>this.actualizar(row.uid)}\r\n              >\r\n                Actualizar\r\n              </Button>\r\n              </StyledTableCell>\r\n              <StyledTableCell align=\"right\">\r\n              <div id={row.uid} className=\"foto\" onClick={()=>this.handleOpen(row.url)}>\r\n                   \r\n                      <img src={row.url} alt={row.url}/>\r\n                    \r\n              </div>\r\n                      \r\n                \r\n              </StyledTableCell>\r\n            </StyledTableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n      </ImageGroup>\r\n    </TableContainer>\r\n\r\n    <Dialog onClose={this.handleClose} aria-labelledby=\"customized-dialog-title\" open={this.state.open}>\r\n        \r\n        <DialogContent dividers>\r\n\r\n          {\r\n\r\n            \r\n          }\r\n        <div className=\"fotomodal\">\r\n                   \r\n                   <img style={{height:500}} src={this.state.url} alt={this.state.url}/>\r\n                 \r\n           </div>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button autoFocus onClick={this.handleClose} color=\"primary\">\r\n            Cerrar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n</div>\r\n   )\r\n  }\r\n}\r\nexport default Preferences;"]},"metadata":{},"sourceType":"module"}